<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detector &mdash; Sentry Dynamic Sampling Controller 1.3.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Exceptions" href="exceptions.html" />
    <link rel="prev" title="Choices" href="choices.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Sentry Dynamic Sampling Controller
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Index</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Sentry Dynamic Sampling Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_does_it_work.html">How does it work</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to_deploy.html">How to Deploy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../sentry.html">sentry</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../sentry.html#subpackages">Subpackages</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../sentry.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="admin.html">Admin</a></li>
<li class="toctree-l3"><a class="reference internal" href="apps.html">Apps</a></li>
<li class="toctree-l3"><a class="reference internal" href="auth.html">Auth</a></li>
<li class="toctree-l3"><a class="reference internal" href="choices.html">Choices</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Detector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#controller.sentry.detector.SpikesDetector"><code class="docutils literal notranslate"><span class="pre">SpikesDetector</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="filters.html">Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="forms.html">Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="inlines.html">Inlines</a></li>
<li class="toctree-l3"><a class="reference internal" href="mixins.html">Mixins</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="serializers.html">Serializers</a></li>
<li class="toctree-l3"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="views.html">Views</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Sentry Dynamic Sampling Controller</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../sentry.html">sentry</a></li>
      <li class="breadcrumb-item active">Detector</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/references/sentry/detector.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-controller.sentry.detector">
<span id="detector"></span><h1>Detector<a class="headerlink" href="#module-controller.sentry.detector" title="Permalink to this heading"></a></h1>
<p>Detector.</p>
<dl class="py class">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">controller.sentry.detector.</span></span><span class="sig-name descname"><span class="pre">SpikesDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">influence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/controller/sentry/detector.html#SpikesDetector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#controller.sentry.detector.SpikesDetector" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>SpikesDetector using Z-score based algorithm.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.lag">
<span class="sig-name descname"><span class="pre">lag</span></span><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.lag" title="Permalink to this definition"></a></dt>
<dd><p>The lag parameter determines how much your data will be smoothed and how adaptive the
algorithm is to changes in the long-term average of the data. The more stationary your
data is, the more lags you should include (this should improve the robustness of the algorithm).
If your data contains time-varying trends, you should consider how quickly you want the algorithm
to adapt to these trends. I.e., if you put lag at 10, it takes 10 ‘periods’ before the algorithm’s
threshold is adjusted to any systematic changes in the long-term average. So choose the lag parameter
based on the trending behavior of your data and how adaptive you want the algorithm to be.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.threshold">
<span class="sig-name descname"><span class="pre">threshold</span></span><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.threshold" title="Permalink to this definition"></a></dt>
<dd><p>The threshold parameter is the number of standard deviations from the moving mean
above which the algorithm will classify a new datapoint as being a signal.
For example, if a new datapoint is 4.0
standard deviations above the moving mean and the threshold parameter is set as 3.5,
the algorithm will identify the datapoint as a signal. This parameter should be set based
on how many signals you expect.
For example, if your data is normally distributed, a threshold (or: z-score) of 3.5
corresponds to a signaling probability of 0.00047 (from this table),
which implies that you expect a signal once every 2128 datapoints (1/0.00047).
The threshold therefore directly influences how sensitive the algorithm is
and thereby also determines how often the algorithm signals.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.influence">
<span class="sig-name descname"><span class="pre">influence</span></span><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.influence" title="Permalink to this definition"></a></dt>
<dd><p>The influence parameter determines the influence of signals on
the algorithm’s detection threshold.
If put at 0, signals have no influence on the threshold, such that future signals are detected based on
a threshold that is calculated with a mean and standard deviation that is not influenced by past signals.
If put at 0.5, signals have half the influence of normal data points. Another way to think about this
is that if you put the influence at 0, you implicitly assume stationarity
(i.e. no matter how many signals there are, you always expect the time series to return to the
same average over the long term).
If this is not the case, you should put the influence parameter somewhere between 0 and 1,
depending on the extent to which signals can systematically influence the time-varying trend of the data.
E.g., if signals lead to a structural break of the long-term average of the time series,
the influence parameter should be put high (close to 1)
so the threshold can react to structural breaks quickly.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">48</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">influence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">floor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/controller/sentry/detector.html#SpikesDetector.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Init detector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lag</strong> (<em>int</em>) – The lag</p></li>
<li><p><strong>threshold</strong> (<em>int</em>) – The threshold</p></li>
<li><p><strong>influence</strong> (<em>float</em>) – The influence</p></li>
<li><p><strong>floor</strong> (<em>int</em>) – The minimum floor</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/controller/sentry/detector.html#SpikesDetector.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.compute" title="Permalink to this definition"></a></dt>
<dd><p>Method to compute signals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – data</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Signal
list[float]: avg filter
list[float]: std filter</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.compute_sentry">
<span class="sig-name descname"><span class="pre">compute_sentry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stats</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">collections.OrderedDict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/controller/sentry/detector.html#SpikesDetector.compute_sentry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.compute_sentry" title="Permalink to this definition"></a></dt>
<dd><p>Method to compute from a sentry stats dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>stats</strong> (<em>dict</em>) – The Sentry Stats</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Annotated signal
list[tuple[str, int, int, float, float]]: Full algorithm results</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>OrderedDict</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#controller.sentry.exceptions.SentryNoOutcomeException" title="controller.sentry.exceptions.SentryNoOutcomeException"><strong>SentryNoOutcomeException</strong></a> – When there is no series with accepted outcome</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="controller.sentry.detector.SpikesDetector.from_project">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="models.html#controller.sentry.models.Project" title="controller.sentry.models.Project"><span class="pre">Project</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#controller.sentry.detector.SpikesDetector" title="controller.sentry.detector.SpikesDetector"><span class="pre">SpikesDetector</span></a></span></span><a class="reference internal" href="../../_modules/controller/sentry/detector.html#SpikesDetector.from_project"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#controller.sentry.detector.SpikesDetector.from_project" title="Permalink to this definition"></a></dt>
<dd><p>Class method to create a <cite>SpikesDetector</cite> from a <a class="reference internal" href="models.html#controller.sentry.models.Project" title="controller.sentry.models.Project"><code class="xref py py-class docutils literal notranslate"><span class="pre">controller.sentry.models.Project</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>project</strong> (<a class="reference internal" href="models.html#controller.sentry.models.Project" title="controller.sentry.models.Project"><em>Project</em></a>) – The project</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Detector</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#controller.sentry.detector.SpikesDetector" title="controller.sentry.detector.SpikesDetector">SpikesDetector</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="choices.html" class="btn btn-neutral float-left" title="Choices" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="exceptions.html" class="btn btn-neutral float-right" title="Exceptions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, jeanloup.monnier &lt;jean-loup.monnier@spikeelabs.fr&gt;.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>